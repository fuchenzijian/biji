### 闭包

闭包，其实是一种语言特性，它指的是程序设计语言中，允许将函数看做对象，然后能像在对象中的操作般在函数中定义实例（局部）变量，而这些变量能在函数中保存到函数的实例对象销毁为止，其他代码块能通过某种方式获取这些实例（局部变量）的值并进行应用扩展。



var a = 1;
var obj ={"name":"小明"}  

基本数据类型是存储在栈内存中，引用数据类型是存在堆内存中的
根据这句话可以分析下 上面的代码做的事情
1，在栈内存中开辟一块空间用来存储a这个变量名和a对应的值
2，在堆内存中开辟一块空间存储obj对应的值，在栈内存中开辟空间存储obj变量名和obj变量在堆内存的地址指向

此时，如果我们在这两句代码后面增加一句
obj ={"name":"小红"}
这时候，我们之前存储的小明就会被垃圾回收机制干掉然后，obj新的指向会对着小红


作用域链

```js
function outer(){
        var a = 1;
        function add(){
            a++;
            console.log(a);
        }
        add();
    }
    outer();
    outer();
    outer();
```

栈内存里作用域分析：
add 执行环境
           空
outer执行环境
变量a 和1
add   和 引用地址 

全局 window执行环境
outer   和 引用地址

原型链读取变量的时候是从内往外，自下而上，局部变量大于全局变量优先级

程序在执行过程中，如果检测到执行完的程序就会进行垃圾回收，避免造城内存泄漏，对用的作用域会在内存回收后消失，最终会留下全局的window作用域


闭包：

```js
function outer(){
        var a = 1；  
        return function add(){
            a++;
            console.log(a);
        }
    }
    var inner = outer();
     inner();
     inner();
     inner();
```

 

闭包 把局部变量return成一个全局变量

变量不会被垃圾回收机制回收